(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{7951:function(n,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug/[locationId]",function(){return o(4110)}])},4110:function(n,t,o){"use strict";o.r(t),o.d(t,{__N_SSG:function(){return x}});var r=o(5893),e=o(5276),i=o(381),c=o.n(i),a=o(9008),l=o(1163),s=o(7294),d=o(214),u=o.n(d),f=o(9506),h=o(4402),m=function(n){var t=n.camera.updates[n.camera.updates.length-1],o=(0,f.PJ)((0,f.PJ)((0,f.PJ)((0,f.V0)(t.state))));console.log();var e=o.length,i=o[0].length,a=100,l=0,s=0,d=0;o.forEach((function(n){n.forEach((function(n){n<a&&(a=n),n>l&&(l=n),s+=n}))})),d=s/(e*i);var u={};n.camera.units.forEach((function(n){var t=(0,f.S1)(n.bbox);console.log(t);for(var o=t.startX;o<=t.endX;o++)for(var r=t.startY;r<=t.endY;r++)o==t.startX&&(u["".concat(o,"-").concat(r,"-left")]=!0),r==t.startY&&(u["".concat(o,"-").concat(r,"-top")]=!0),o==t.endX&&(u["".concat(o,"-").concat(r,"-right")]=!0),r==t.endY&&(u["".concat(o,"-").concat(r,"-bottom")]=!0)})),console.log(u);var h="solid #000";return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{children:["Camera ",n.index]}),(0,r.jsxs)("h5",{style:{fontStyle:"italic",fontWeight:"normal",marginTop:0},children:["Last updated"," ",(null===t||void 0===t?void 0:t.timestamp)?c().unix((null===t||void 0===t?void 0:t.timestamp)/1e3).fromNow():"unknown"]}),(0,r.jsxs)("h5",{children:["Height: ",e]}),(0,r.jsxs)("h5",{children:["Width: ",i]}),(0,r.jsxs)("h5",{children:["Min: ",a.toFixed(1)]}),(0,r.jsxs)("h5",{children:["Max: ",l.toFixed(1)]}),(0,r.jsxs)("h5",{children:["Avg: ",d.toFixed(1)]})]}),(0,r.jsx)("div",{children:o.map((function(n,t){return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:n.map((function(n,o){var e=255*((n-a)/(l-a)),i=255-e;return(0,r.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[0===o&&(0,r.jsxs)("p",{style:{margin:0,marginTop:4,fontVariant:"tabular-nums",fontSize:14},children:[t<10?"0":"",t]}),(0,r.jsxs)("div",{children:[0===t&&(0,r.jsxs)("p",{style:{margin:0,marginLeft:8,fontVariant:"tabular-nums",fontSize:14},children:[o<10?"0":"",o]}),(0,r.jsx)("div",{style:{borderLeft:u["".concat(o,"-").concat(t,"-left")]?h:void 0,borderRight:u["".concat(o,"-").concat(t,"-right")]?h:void 0,borderTop:u["".concat(o,"-").concat(t,"-top")]?h:void 0,borderBottom:u["".concat(o,"-").concat(t,"-bottom")]?h:void 0,marginLeft:u["".concat(o,"-").concat(t,"-left")]?-3:0,marginRight:u["".concat(o,"-").concat(t,"-right")]?-3:0,marginTop:u["".concat(o,"-").concat(t,"-top")]?-3:0,marginBottom:u["".concat(o,"-").concat(t,"-bottom")]?-3:0},children:(0,r.jsx)("p",{style:{margin:4,fontVariant:"tabular-nums",fontSize:14,fontWeight:"400",backgroundColor:"rgb(".concat(e,", ").concat(i,", 0)")},children:n.toFixed(1)})})]})]},o)}))},t)}))})]})},v=function(n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.default,{children:[(0,r.jsxs)("title",{children:["Debug: ",n.location.name," Gym Capacity"]}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("h2",{children:["Debug: ",n.location.name,n.location.cameras.map((function(n,t){return(0,r.jsx)(m,{camera:n,index:t},t)}))]})]})},x=!0;t.default=function(){var n=(0,l.useRouter)().query.locationId,t=(0,s.useState)(void 0),o=t[0],i=t[1];return(0,s.useEffect)((function(){console.log("Searching","locations/".concat(null!==n&&void 0!==n?n:"demo"));var t=(0,e.iH)(h.db,"locations/".concat(null!==n&&void 0!==n?n:"demo")),o=(0,e.jM)(t,(function(n){var t;o(),console.log(n.val()),i(null!==(t=n.val())&&void 0!==t?t:null)}),(function(n){i(null)}))}),[]),(0,r.jsx)("div",{className:u().container,children:void 0===o?(0,r.jsx)("p",{children:"Loading..."}):null===o?(0,r.jsx)("p",{children:"Location Not Found"}):(0,r.jsx)(v,{location:o})})}},9506:function(n,t,o){"use strict";o.d(t,{V0:function(){return r},PJ:function(){return e},S1:function(){return i},U4:function(){return c}});var r=function(n){return n.trim().split("\n").map((function(n){return n.trim().split(" ").map((function(n){return+n}))}))},e=function(n){for(var t=n.length,o=n[0].length,r=new Array(o),e=0;e<o;e++)r[e]=new Array(t);for(var i=0;i<o;i++)for(var c=0;c<t;c++)r[i][c]=n[t-c-1][i];return r},i=function(n){var t=n.split("-"),o=t[0],r=t[1],e=o.split(","),i=r.split(",");return{startX:+e[0],startY:+e[1],endX:+i[0],endY:+i[1]}},c=function(n,t,o,r){var e=o+.4*(r-o);console.log(e);for(var i=0,c=0,a=t.startX;a<=t.endX;a++)for(var l=t.startY;l<=t.endY;l++)i++,n[a][l]>=e&&(console.log("row:",l,"col:",a,"val:",n[a][l]),c++);return console.log(c,i),c>.25*i}},214:function(n){n.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(n,t,o){n.exports=o(5443)},1163:function(n,t,o){n.exports=o(387)}},function(n){n.O(0,[885,774,888,179],(function(){return t=7951,n(n.s=t);var t}));var t=n.O();_N_E=t}]);