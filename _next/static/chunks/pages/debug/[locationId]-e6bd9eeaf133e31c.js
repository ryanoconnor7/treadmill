(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{7951:function(n,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug/[locationId]",function(){return t(4110)}])},4110:function(n,o,t){"use strict";t.r(o),t.d(o,{__N_SSG:function(){return x}});var r=t(5893),e=t(5276),i=t(381),c=t.n(i),a=t(9008),l=t(1163),s=t(7294),d=t(214),u=t.n(d),f=t(9506),h=t(4402),m=function(n){var o=n.camera.updates[n.camera.updates.length-1],t=(0,f.PJ)((0,f.PJ)((0,f.PJ)((0,f.V0)(o.state))));console.log();var e=t.length,i=t[0].length,a=100,l=0,s=0,d=0;t.forEach((function(n){n.forEach((function(n){n<a&&(a=n),n>l&&(l=n),s+=n}))})),d=s/(e*i);var u={};n.camera.units.forEach((function(n){var o=(0,f.S1)(n.bbox);console.log(o);for(var t=o.startX;t<=o.endX;t++)for(var r=o.startY;r<=o.endY;r++)t==o.startX&&(u["".concat(t,"-").concat(r,"-left")]=!0),r==o.startY&&(u["".concat(t,"-").concat(r,"-top")]=!0),t==o.endX&&(u["".concat(t,"-").concat(r,"-right")]=!0),r==o.endY&&(u["".concat(t,"-").concat(r,"-bottom")]=!0)})),console.log(u);var h="solid #000";return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{children:["Camera ",n.index]}),(0,r.jsxs)("h5",{style:{fontStyle:"italic",fontWeight:"normal",marginTop:0},children:["Last updated"," ",(null===o||void 0===o?void 0:o.timestamp)?c().unix((null===o||void 0===o?void 0:o.timestamp)/1e3).fromNow():"unknown"]}),(0,r.jsxs)("h5",{children:["Height: ",e]}),(0,r.jsxs)("h5",{children:["Width: ",i]}),(0,r.jsxs)("h5",{children:["Min: ",a.toFixed(1)]}),(0,r.jsxs)("h5",{children:["Max: ",l.toFixed(1)]}),(0,r.jsxs)("h5",{children:["Avg: ",d.toFixed(1)]})]}),(0,r.jsx)("div",{children:t.map((function(n,o){return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:n.map((function(n,t){var e=255*((n-a)/(l-a)),i=255-e;return(0,r.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[0===t&&(0,r.jsxs)("p",{style:{margin:0,marginTop:4,fontVariant:"tabular-nums",fontSize:14},children:[o<10?"0":"",o]}),(0,r.jsxs)("div",{children:[0===o&&(0,r.jsxs)("p",{style:{margin:0,marginLeft:8,fontVariant:"tabular-nums",fontSize:14},children:[t<10?"0":"",t]}),(0,r.jsx)("div",{style:{borderLeft:u["".concat(t,"-").concat(o,"-left")]?h:void 0,borderRight:u["".concat(t,"-").concat(o,"-right")]?h:void 0,borderTop:u["".concat(t,"-").concat(o,"-top")]?h:void 0,borderBottom:u["".concat(t,"-").concat(o,"-bottom")]?h:void 0},children:(0,r.jsx)("p",{style:{margin:4,fontVariant:"tabular-nums",fontSize:14,fontWeight:"400",backgroundColor:"rgb(".concat(e,", ").concat(i,", 0)")},children:n.toFixed(1)})})]})]},t)}))},o)}))})]})},v=function(n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.default,{children:[(0,r.jsxs)("title",{children:["Debug: ",n.location.name," Gym Capacity"]}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("h2",{children:["Debug: ",n.location.name,n.location.cameras.map((function(n,o){return(0,r.jsx)(m,{camera:n,index:o},o)}))]})]})},x=!0;o.default=function(){var n=(0,l.useRouter)().query.locationId,o=(0,s.useState)(void 0),t=o[0],i=o[1];return(0,s.useEffect)((function(){console.log("Searching","locations/".concat(null!==n&&void 0!==n?n:"demo"));var o=(0,e.iH)(h.db,"locations/".concat(null!==n&&void 0!==n?n:"demo")),t=(0,e.jM)(o,(function(n){var o;t(),console.log(n.val()),i(null!==(o=n.val())&&void 0!==o?o:null)}),(function(n){i(null)}))}),[]),(0,r.jsx)("div",{className:u().container,children:void 0===t?(0,r.jsx)("p",{children:"Loading..."}):null===t?(0,r.jsx)("p",{children:"Location Not Found"}):(0,r.jsx)(v,{location:t})})}},9506:function(n,o,t){"use strict";t.d(o,{V0:function(){return r},PJ:function(){return e},S1:function(){return i},U4:function(){return c}});var r=function(n){return n.trim().split("\n").map((function(n){return n.trim().split(" ").map((function(n){return+n}))}))},e=function(n){for(var o=n.length,t=n[0].length,r=new Array(t),e=0;e<t;e++)r[e]=new Array(o);for(var i=0;i<t;i++)for(var c=0;c<o;c++)r[i][c]=n[o-c-1][i];return r},i=function(n){var o=n.split("-"),t=o[0],r=o[1],e=t.split(","),i=r.split(",");return{startX:+e[0],startY:+e[1],endX:+i[0],endY:+i[1]}},c=function(n,o,t,r){var e=t+.4*(r-t);console.log(e);for(var i=0,c=0,a=o.startX;a<=o.endX;a++)for(var l=o.startY;l<=o.endY;l++)i++,n[a][l]>=e&&(console.log("row:",l,"col:",a,"val:",n[a][l]),c++);return console.log(c,i),c>.25*i}},214:function(n){n.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(n,o,t){n.exports=t(5443)},1163:function(n,o,t){n.exports=t(387)}},function(n){n.O(0,[885,774,888,179],(function(){return o=7951,n(n.s=o);var o}));var o=n.O();_N_E=o}]);