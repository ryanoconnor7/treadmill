(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{6628:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/location/[locationId]",function(){return r(3400)}])},3400:function(t,e,r){"use strict";r.r(e),r.d(e,{__N_SSG:function(){return k},default:function(){return b}});var n=r(5893),o=r(5276),a=r(381),i=r.n(a),s=r(9008),c=r(1163),l=r(7294),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},u(t,e)};var d=function(){return d=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},d.apply(this,arguments)};function p(t){var e=t.className,r=t.counterClockwise,n=t.dashRatio,o=t.pathRadius,a=t.strokeWidth,i=t.style;return(0,l.createElement)("path",{className:e,style:Object.assign({},i,f({pathRadius:o,dashRatio:n,counterClockwise:r})),d:h({pathRadius:o,counterClockwise:r}),strokeWidth:a,fillOpacity:0})}function h(t){var e=t.pathRadius,r=t.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+e+"\n      a "+e+","+e+" "+r+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+r+" 1 1 0,-"+2*e+"\n    "}function f(t){var e=t.counterClockwise,r=t.dashRatio,n=t.pathRadius,o=2*Math.PI*n,a=(1-r)*o;return{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(e?-a:a)+"px"}}var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var t=this.props,e=t.value,r=t.minValue,n=t.maxValue;return(Math.min(Math.max(e,r),n)-r)/(n-r)},e.prototype.render=function(){var t=this.props,e=t.circleRatio,r=t.className,n=t.classes,o=t.counterClockwise,a=t.styles,i=t.strokeWidth,s=t.text,c=this.getPathRadius(),u=this.getPathRatio();return(0,l.createElement)("svg",{className:n.root+" "+r,style:a.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,l.createElement)("circle",{className:n.background,style:a.background,cx:50,cy:50,r:50}):null,(0,l.createElement)(p,{className:n.trail,counterClockwise:o,dashRatio:e,pathRadius:c,strokeWidth:i,style:a.trail}),(0,l.createElement)(p,{className:n.path,counterClockwise:o,dashRatio:u*e,pathRadius:c,strokeWidth:i,style:a.path}),s?(0,l.createElement)("text",{className:n.text,style:a.text,x:50,y:50},s):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(l.Component);function g(t){t.children;var e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r}(t,["children"]);return(0,l.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren"},(0,l.createElement)("div",{style:{position:"relative",width:"100%",height:"100%"}},(0,l.createElement)(m,d({},e)),t.children?(0,l.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren__children",style:{position:"absolute",width:"100%",height:"100%",marginTop:"-100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},t.children):null))}var y=r(214),x=r.n(y),_=r(4402),v=function(t){var e=t.location,r={},o=void 0;return e.cameras.forEach((function(t){var e=t.updates[t.updates.length-1];t.units.forEach((function(t,n){r[t.type]||(r[t.type]={total:0,occupied:0}),r[t.type].total+=1,(null===e||void 0===e?void 0:e.occupancy[n])&&(r[t.type].occupied+=1)})),(null!==o&&void 0!==o?o:0)<e.timestamp&&(o=e.timestamp)})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.default,{children:[(0,n.jsxs)("title",{children:[e.name," Gym Capacity"]}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:x().main,children:[(0,n.jsxs)("h1",{style:{textAlign:"center"},children:[e.name," Gym Capacity"]}),(0,n.jsxs)("h3",{style:{fontStyle:"italic",fontWeight:"normal",marginTop:0},children:["Last updated"," ",o?i().unix(o).fromNow():"unknown"]}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flexDirection:"row",maxWidth:400,textAlign:"center",justifyContent:"center"},children:Object.entries(r).map((function(t){var e=t[1].occupied/t[1].total,r="green";return e>=.5&&e<=.75?r="orange":e>.75&&(r="red"),(0,n.jsxs)("div",{className:x().card,style:{maxWidth:170,flex:1,flexGrow:1},children:[(0,n.jsxs)(g,{value:t[1].total-t[1].occupied,maxValue:t[1].total,styles:{root:{},path:{stroke:r,strokeLinecap:"round",transition:"stroke-dashoffset 0.5s ease 0s",transformOrigin:"center center"},trail:{stroke:"#d6d6d6",strokeLinecap:"butt",transform:"rotate(0.25turn)",transformOrigin:"center center"},text:{fill:r,fontSize:"22px",fontWeight:"700"}},children:[(0,n.jsx)("p",{style:{color:r,fontSize:32,fontWeight:"bold",marginTop:-16},className:x().description,children:"".concat(t[1].total-t[1].occupied)}),(0,n.jsx)("p",{style:{color:r,fontSize:20,fontWeight:"bold",marginTop:-10},className:x().description,children:"open"})]}),(0,n.jsx)("p",{style:{textAlign:"center",fontWeight:"bold",marginTop:8},className:x().description,children:t[0]}),(0,n.jsxs)("p",{style:{fontSize:16,color:"gray"},className:x().description,children:[t[1].total," unit",1===t[1].total?"":"s"," total"]})]},t[0])}))})]})]})},k=!0,b=function(){var t=(0,c.useRouter)().query.locationId,e=(0,l.useState)(void 0),r=e[0],a=e[1];return(0,l.useEffect)((function(){console.log("Searching","locations/".concat(null!==t&&void 0!==t?t:"demo"));var e=(0,o.iH)(_.db,"locations/".concat(null!==t&&void 0!==t?t:"demo"));(0,o.jM)(e,(function(t){var e;console.log(t.val()),a(null!==(e=t.val())&&void 0!==e?e:null)}),(function(t){a(null)}))}),[]),(0,n.jsx)("div",{className:x().container,children:void 0===r?(0,n.jsx)("p",{children:"Loading..."}):null===r?(0,n.jsx)("p",{children:"Location Not Found"}):(0,n.jsx)(v,{location:r})})}},214:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(t,e,r){t.exports=r(5443)},1163:function(t,e,r){t.exports=r(387)}},function(t){t.O(0,[885,774,888,179],(function(){return e=6628,t(t.s=e);var e}));var e=t.O();_N_E=e}]);