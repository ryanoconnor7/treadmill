(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{6628:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/location/[locationId]",function(){return o(3400)}])},3400:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return k}});var r=o(5893),a=o(5276),n=o(381),i=o.n(n),s=o(9008),c=o(1163),l=o(7294),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},u(t,e)};function d(t){var e=t.className,o=t.counterClockwise,r=t.dashRatio,a=t.pathRadius,n=t.strokeWidth,i=t.style;return(0,l.createElement)("path",{className:e,style:Object.assign({},i,h({pathRadius:a,dashRatio:r,counterClockwise:o})),d:p({pathRadius:a,counterClockwise:o}),strokeWidth:n,fillOpacity:0})}function p(t){var e=t.pathRadius,o=t.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+e+"\n      a "+e+","+e+" "+o+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+o+" 1 1 0,-"+2*e+"\n    "}function h(t){var e=t.counterClockwise,o=t.dashRatio,r=t.pathRadius,a=2*Math.PI*r,n=(1-o)*a;return{strokeDasharray:a+"px "+a+"px",strokeDashoffset:(e?-n:n)+"px"}}var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function o(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var t=this.props,e=t.value,o=t.minValue,r=t.maxValue;return(Math.min(Math.max(e,o),r)-o)/(r-o)},e.prototype.render=function(){var t=this.props,e=t.circleRatio,o=t.className,r=t.classes,a=t.counterClockwise,n=t.styles,i=t.strokeWidth,s=t.text,c=this.getPathRadius(),u=this.getPathRatio();return(0,l.createElement)("svg",{className:r.root+" "+o,style:n.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,l.createElement)("circle",{className:r.background,style:n.background,cx:50,cy:50,r:50}):null,(0,l.createElement)(d,{className:r.trail,counterClockwise:a,dashRatio:e,pathRadius:c,strokeWidth:i,style:n.trail}),(0,l.createElement)(d,{className:r.path,counterClockwise:a,dashRatio:u*e,pathRadius:c,strokeWidth:i,style:n.path}),s?(0,l.createElement)("text",{className:r.text,style:n.text,x:50,y:50},s):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(l.Component);var m=o(214),_=o.n(m),x=o(4402),g=function(t){var e=t.location,o={},a=void 0;return e.cameras.forEach((function(t){var e=t.updates[t.updates.length-1];t.units.forEach((function(t,r){o[t.type]||(o[t.type]={total:0,occupied:0}),o[t.type].total+=1,(null===e||void 0===e?void 0:e.occupancy[r])&&(o[t.type].occupied+=1)})),(null!==a&&void 0!==a?a:0)<e.timestamp&&(a=e.timestamp)})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.default,{children:[(0,r.jsxs)("title",{children:[e.name," Gym Capacity"]}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:_().main,children:[(0,r.jsxs)("h1",{children:[e.name," Gym Capacity"]}),(0,r.jsxs)("h3",{style:{fontStyle:"italic",fontWeight:"normal",marginTop:0},children:["Last updated"," ",a?i().unix(a).fromNow():"unknown"]}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flexDirection:"row",maxWidth:400,textAlign:"center"},children:Object.entries(o).map((function(t){var e=t[1].occupied/t[1].total;return(0,r.jsxs)("div",{className:_().card,style:{width:200,flex:1,flexGrow:1},children:[(0,r.jsx)(f,{value:e,maxValue:2,text:"".concat(t[1].occupied,"/").concat(t[1].total),styles:{root:{},path:{stroke:"rgba(62, 152, 199, ".concat(e/100,")"),strokeLinecap:"butt",transition:"stroke-dashoffset 0.5s ease 0s",transform:"rotate(0.25turn)",transformOrigin:"center center"},trail:{stroke:"#d6d6d6",strokeLinecap:"butt",transform:"rotate(0.25turn)",transformOrigin:"center center"},text:{fill:"#f88",fontSize:"22px",fontWeight:"700"}}}),(0,r.jsx)("p",{className:_().description,children:t[0]})]},t[0])}))})]})]})},k=function(){var t=(0,c.useRouter)().query.locationId,e=(0,l.useState)(void 0),o=e[0],n=e[1];return(0,l.useEffect)((function(){console.log("Searching","locations/".concat(null!==t&&void 0!==t?t:"demo"));var e=(0,a.iH)(x.db,"locations/".concat(null!==t&&void 0!==t?t:"demo"));(0,a.jM)(e,(function(t){var e;console.log(t.val()),n(null!==(e=t.val())&&void 0!==e?e:null)}),(function(t){n(null)}))}),[]),(0,r.jsx)("div",{className:_().container,children:void 0===o?(0,r.jsx)("p",{children:"Loading..."}):null===o?(0,r.jsx)("p",{children:"Location Not Found"}):(0,r.jsx)(g,{location:o})})}},214:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(t,e,o){t.exports=o(5443)},1163:function(t,e,o){t.exports=o(387)}},function(t){t.O(0,[885,774,888,179],(function(){return e=6628,t(t.s=e);var e}));var e=t.O();_N_E=e}]);